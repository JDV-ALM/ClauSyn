<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- AcciÃ³n para el reporte de factura mejorado -->
    <record id="account_invoices_almus_enhanced" model="ir.actions.report">
        <field name="name">Proforma Mejorada</field>
        <field name="model">account.move</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">almus_invoice_reports.report_invoice_almus_enhanced</field>
        <field name="report_file">almus_invoice_reports.report_invoice_almus_enhanced</field>
        <field name="print_report_name">'Factura %s' % (object.name or '')</field>
        <field name="binding_model_id" ref="account.model_account_move"/>
        <field name="binding_type">report</field>
        <field name="groups_id" eval="[(4, ref('account.group_account_invoice'))]"/>
    </record>

    <!-- Reporte con pagos incluidos -->
    <template id="report_invoice_with_payments_almus_enhanced">
        <t t-call="almus_invoice_reports.report_invoice_almus_enhanced">
            <t t-set="print_with_payments" t-value="True"/>
        </t>
    </template>
</odoo>